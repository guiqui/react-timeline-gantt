!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("moment"),require("react-sizeme")):"function"==typeof define&&define.amd?define("react-gantt-timeline",["React","moment","ReactDOM"],e):"object"==typeof exports?exports["react-gantt-timeline"]=e(require("react"),require("moment"),require("react-sizeme")):t["react-gantt-timeline"]=e(t.React,t.moment,t.ReactDOM)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){t.exports=n(6)()},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,l=0,u=[],p=n(10);function d(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(g(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(g(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function f(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var a=l++;n=c||(c=m(e)),r=k.bind(null,n,a,!1),o=k.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=p(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return d(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}t&&d(f(t,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var v,w=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function k(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=n(7);function o(){}t.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".header-top {\r\n  height: 20px;\r\n\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n\r\n.header-middle {\r\n  height: 20px;\r\n  background-color: chocolate;\r\n  color: white;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n.header-bottom {\r\n  height: 20px;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n",""]),t.exports=e},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r=n(12);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".timeLine {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: solid 1px rgb(207, 207, 205);\r\n  font-size: 12px;\r\n  user-select: none;\r\n  -moz-user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n}\r\n\r\n/* Main Area */\r\n\r\n.timeLine-main {\r\n  flex: 1 1 100%;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: hidden;\r\n}\r\n/* Main Area Header*/\r\n\r\n.timeLine-main-header-viewPort {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  height: 60px;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  overflow: hidden;\r\n}\r\n\r\n.timeLine-main-header-container {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #333333;\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n\r\n.timeLine-main-header-day-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  background-color: rgb(112, 112, 112);\r\n  font-size: 10px;\r\n  text-align: center;\r\n  border-right: solid 1px;\r\n  border-top: solid 1px;\r\n  border-bottom: solid 1px;\r\n  top: 20px;\r\n  height: 40px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-header-top-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  border-right: solid 1px white;\r\n  height: 20px;\r\n  z-index: 91;\r\n}\r\n\r\n.timeLine-main-header-day-week {\r\n  flex: 0 0 12px;\r\n  padding: 4px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-day-month {\r\n  top: 0px;\r\n  position: sticky;\r\n  flex: 0 0 15px;\r\n  padding: 5px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-time {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: stretch;\r\n  height: 22px;\r\n  justify-content: stretch;\r\n}\r\n\r\n.timeLine-main-header-time-item {\r\n  border-left: solid 1px silver;\r\n  border-bottom: solid 1px silver;\r\n  border-top: solid 1px silver;\r\n  text-align: center;\r\n  padding-top: 5px;\r\n}\r\n/* Main Area Data*/\r\n\r\n.timeLine-main-data-viewPort {\r\n  flex: 1 1 auto;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background-color: #fbf9f9;\r\n}\r\n.timeLine-main-data-container {\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: rgb(255, 255, 255);\r\n}\r\n\r\n.timeLine-main-data-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 50px;\r\n}\r\n\r\n.timeLine-main-data-task {\r\n  position: absolute;\r\n  background-color: darkorchid;\r\n  border-radius: 14px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-data-task-side {\r\n  position: absolute;\r\n  width: 10px;\r\n  cursor: col-resize;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.timeLine-main-data-task-side-linker {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 4px;\r\n  cursor: default;\r\n  z-index: 100;\r\n}\r\n.timeLine-main-data-task-side-linker:hover {\r\n  background-color: black;\r\n  border: solid 0.5px grey;\r\n}\r\n/* .timeLine-main-data-task:hover {\r\n    background-color:chocolate;\r\n    border:solid 2px darkorchid;\r\n    cursor: move;\r\n} */\r\n\r\n.timeLine-main-data-verticalLine {\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  width: 24px;\r\n  background-color: white;\r\n  border-left-width: 0.5px;\r\n  border-left-color: rgb(207, 207, 205);\r\n  border-left-style: dashed;\r\n}\r\n\r\n/* Side Area */\r\n\r\n.timeLine-side-main {\r\n  flex: 0 0 auto;\r\n  width: 108px;\r\n  min-width: 108px;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.timeLine-side {\r\n  flex: 1 0 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n}\r\n\r\n.verticalResizer {\r\n  flex: 0 0 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: col-resize;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n  height: 100%;\r\n}\r\n.squareGrip {\r\n  flex: 0 0 auto;\r\n\r\n  border-radius: 50%;\r\n  height: 5px;\r\n  width: 5px;\r\n  margin: 3px 0;\r\n}\r\n\r\n.timeLine-side-title {\r\n  flex: 0 0 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.timeLine-side-task-viewPort {\r\n  position: relative;\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  background-color: #fbf9f9;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n}\r\n\r\n.timeLine-side-task-container {\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.timeLine-side-task-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  border-bottom-width: 0.5px;\r\n  border-bottom-color: rgb(207, 207, 205);\r\n  border-bottom-style: solid;\r\n  height: 30px;\r\n  color: grey;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  outline: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n",""]),t.exports=e},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(2),a=n.n(i);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"grey",color:"white",fontSize:9},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{backgroundColor:"#fbf9f9",borderBottom:"solid 0.5px #cfcfcd"}},task:{showLabel:!1,style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}},l=new(function(){function t(){var e,n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(t){o.data={},t?o.populate(t,c,o.data):o.data=c},(n="load")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.data=c}var e,n,r;return e=t,(n=[{key:"populate",value:function(t,e,n){if(this.isObject(e))for(var r in e)t[r]?(n[r]=t[r],this.populate(t[r],e[r],n[r])):n[r]=e[r]}},{key:"isObject",value:function(t){return"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t}},{key:"values",get:function(){return this.data}}])&&s(e.prototype,n),r&&s(e,r),t}());function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=d(e).call(this,t))||"object"!==u(o)&&"function"!=typeof o?f(r):o).doMouseMove=n.doMouseMove.bind(f(n)),n.doMouseDown=n.doMouseDown.bind(f(n)),n.doMouseUp=n.doMouseUp.bind(f(n)),n.state={dragging:!1},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,r["Component"]),n=e,(i=[{key:"doMouseDown",value:function(t){0===t.button&&(this.draggingPosition=t.clientX,this.setState({dragging:!0}))}},{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp))}},{key:"doMouseMove",value:function(t){if(this.state.dragging){t.stopPropagation();var e=this.draggingPosition-t.clientX;this.draggingPosition=t.clientX,this.props.onTaskListSizing(e)}}},{key:"doMouseUp",value:function(t){this.setState({dragging:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"verticalResizer",style:l.values.taskList.verticalSeparator.style,onMouseDown:this.doMouseDown},o.a.createElement("div",{className:"squareGrip",style:l.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:l.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:l.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:l.values.taskList.verticalSeparator.grip.style}))}}])&&p(n.prototype,i),a&&p(n,a),e}(),m=n(1),b=n.n(m),g=0,v=30,w=5e3,k="day",x="week",O="month",S="year";function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"dayToPosition",function(t,e,n){return t*n+e}),j(this,"daysInYear",function(t){return e.isLeapYear(t)?366:365})}var e,n,r;return e=t,(n=[{key:"dateToPixel",value:function(t,e,n){var r=this.getToday(),o=new Date(t),i=60*(o.getTimezoneOffset()-r.getTimezoneOffset())*1e3;return(o.getTime()-r.getTime()-i)/36e5*(n/24)+e}},{key:"pixelToDate",value:function(t,e,n){var r=24/n,o=t-e,i=this.getToday(),a=i.getTime()+o*r*36e5,s=new Date(a),c=60*(s.getTimezoneOffset()-i.getTimezoneOffset())*1e3;return s.setTime(s.getTime()+c),s}},{key:"getToday",value:function(){var t=new Date;return t.setHours(0,0,0,0),t}},{key:"monthDiff",value:function(t,e){return Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()))}},{key:"daysInMonth",value:function(t,e){return new Date(e,t,0).getDate()}},{key:"isLeapYear",value:function(t){return t%400==0||t%100!=0&&t%4==0}}])&&T(e.prototype,n),r&&T(e,r),t}());n(8);function L(t){"@babel/helpers - typeof";return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach(function(e){C(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function I(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?U(t):e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var V=function(t){function e(t){return D(this,e),I(this,z(e).call(this,t))}return N(e,r["PureComponent"]),R(e,[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px white",position:"absolute",height:20,left:this.props.left,width:this.props.width}},o.a.createElement("div",null,this.props.label))}}]),e}(),F=function(t){function e(t){var n;return D(this,e),C(U(n=I(this,z(e).call(this,t))),"getStartDate",function(t,e){var n=null;switch(e){case"year":return n=t.year(),b()([n,0,1]);case"month":n=t.year();var r=t.month();return b()([n,r,1]);case"week":return t.subtract(t.day(),"days");default:return t}}),C(U(n),"renderTime",function(t,e,n,r){for(var i=[],a=e/24,s=0,c=0;c<24;c++)i.push(o.a.createElement(V,{key:c,left:s,width:a,label:"shorttime"==n?c:"".concat(c,":00")})),s+=a;return o.a.createElement("div",{key:r,style:{position:"absolute",height:20,left:t,width:e}}," ",i)}),C(U(n),"renderHeaderRows",function(t,e,r){for(var i={top:[],middle:[],bottom:[]},a={},s="",c="",u="",p=null,d=null,f=n.props.currentday,h=n.props.currentday+n.props.numVisibleDays,y=f-v;y<h+v;y++)s!=(p=b()().add(y,"days")).format(n.getFormat(t,"top"))&&(s=p.format(n.getFormat(t,"top")),d=n.getBox(p,t,a.top),a.top=d.left+d.width,i.top.push(o.a.createElement(V,{key:y,left:d.left,width:d.width,label:s}))),c!=p.format(n.getFormat(e))&&(c=p.format(n.getFormat(e)),d=n.getBox(p,e,a.middle),a.middle=d.left+d.width,i.middle.push(o.a.createElement(V,{key:y,left:d.left,width:d.width,label:c}))),u!=p.format(n.getFormat(r))&&(u=p.format(n.getFormat(r)),d=n.getBox(p,r,a.bottom),a.bottom=d.left+d.width,"shorttime"==r||"fulltime"==r?i.bottom.push(n.renderTime(d.left,d.width,r,y)):i.bottom.push(o.a.createElement(V,{key:y,left:d.left,width:d.width,label:u})));return o.a.createElement("div",{className:"timeLine-main-header-container",style:{width:w,maxWidth:w}},o.a.createElement("div",{className:"header-top",style:M({},l.values.header.top.style)},i.top),o.a.createElement("div",{className:"header-middle",style:M({},l.values.header.middle.style)},i.middle),o.a.createElement("div",{className:"header-bottom",style:M({},l.values.header.bottom.style)},i.bottom))}),C(U(n),"renderHeader",function(){switch(n.props.mode){case k:return n.renderHeaderRows("week","dayweek","fulltime");case x:return n.renderHeaderRows("week","dayweek","shorttime");case O:return n.renderHeaderRows("month","dayweek","daymonth");case S:return n.renderHeaderRows("year","month","week")}}),C(U(n),"setBoundaries",function(){n.start=n.props.currentday-v,n.end=n.props.currentday+n.props.numVisibleDays+v}),C(U(n),"needToRender",function(){return n.props.currentday<n.start||n.props.currentday+n.props.numVisibleDays>n.end}),n.setBoundaries(),n}return N(e,r["PureComponent"]),R(e,[{key:"getFormat",value:function(t,e){switch(t){case"year":return"YYYY";case"month":return"top"==e?"MMMM YYYY":"MMMM";case"week":return"top"==e?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}}},{key:"getModeIncrement",value:function(t,e){switch(e){case"year":return P.daysInYear(t.year());case"month":return t.daysInMonth();case"week":return 7;default:return 1}}},{key:"getBox",value:function(t,e,n){var r=this.getModeIncrement(t,e)*this.props.dayWidth;if(!n){var o=this.getStartDate(t,e);o=o.startOf("day");var i=b()().startOf("day"),a=o.diff(i,"days");n=P.dayToPosition(a,this.props.nowposition,this.props.dayWidth)}return{left:n,width:r}}},{key:"render",value:function(){return this.refs.Header&&(this.refs.Header.scrollLeft=this.props.scrollLeft),o.a.createElement("div",{id:"timeline-header",ref:"Header",className:"timeLine-main-header-viewPort"},this.renderHeader())}}]),e}();function A(t){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach(function(e){$(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=X(e).call(this,t),$(q(n=!o||"object"!==A(o)&&"function"!=typeof o?q(r):o),"onCreateLinkMouseDown",function(t,e){0===t.button&&(t.stopPropagation(),n.props.onStartCreateLink(n.props.item,e))}),$(q(n),"onCreateLinkMouseUp",function(t,e){t.stopPropagation(),n.props.onFinishCreateLink(n.props.item,e)}),$(q(n),"onCreateLinkTouchStart",function(t,e){t.stopPropagation(),n.props.onStartCreateLink(n.props.item,e)}),$(q(n),"onCreateLinkTouchEnd",function(t,e){t.stopPropagation(),n.props.onFinishCreateLink(n.props.item,e)}),$(q(n),"doMouseDown",function(t,e){n.props.onUpdateTask&&0===t.button&&(t.stopPropagation(),n.dragStart(t.clientX,e))}),$(q(n),"doMouseMove",function(t){n.state.dragging&&(t.stopPropagation(),n.dragProcess(t.clientX))}),$(q(n),"doMouseUp",function(){n.dragEnd()}),$(q(n),"doTouchStart",function(t,e){n.props.onUpdateTask&&(t.stopPropagation(),n.dragStart(t.touches[0].clientX,e))}),$(q(n),"doTouchMove",function(t){n.state.dragging&&(t.stopPropagation(),n.dragProcess(t.changedTouches[0].clientX))}),$(q(n),"doTouchEnd",function(t){n.dragEnd()}),n.calculateStyle=n.calculateStyle.bind(q(n)),n.state={dragging:!1,left:n.props.left,width:n.props.width,mode:g},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}},{key:"dragStart",value:function(t,e){this.props.onChildDrag(!0),this.draggingPosition=t,this.setState({dragging:!0,mode:e,left:this.props.left,width:this.props.width})}},{key:"dragProcess",value:function(t){var e=this.draggingPosition-t,n=this.state.left,r=this.state.width;switch(this.state.mode){case 1:n=this.state.left-e;break;case 2:n=this.state.left-e,r=this.state.width+e;break;case 3:r=this.state.width-e}var o={item:this.props.item,position:{start:n-this.props.nowposition,end:n+r-this.props.nowposition}};this.props.onTaskChanging(o),this.setState({left:n,width:r}),this.draggingPosition=t}},{key:"dragEnd",value:function(){this.props.onChildDrag(!1);var t=P.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth),e=P.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth);this.props.onUpdateTask(this.props.item,{start:t,end:e}),this.setState({dragging:!1,mode:g})}},{key:"calculateStyle",value:function(){var t=this.props.isSelected?l.values.dataViewPort.task.selectedStyle:l.values.dataViewPort.task.style,e=this.props.color?this.props.color:t.backgroundColor;return this.state.dragging?Y({},t,{backgroundColor:e,left:this.state.left,width:this.state.width,height:this.props.height-5,top:2}):Y({},t,{backgroundColor:e,left:this.props.left,width:this.props.width,height:this.props.height-5,top:2})}},{key:"render",value:function(){var t,e=this,n=this.calculateStyle();return o.a.createElement("div",{onMouseDown:function(t){return e.doMouseDown(t,1)},onTouchStart:function(t){return e.doTouchStart(t,1)},onClick:function(t){e.props.onSelectItem(e.props.item)},style:n},o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:n.height},onMouseDown:function(t){return e.doMouseDown(t,2)},onTouchStart:function(t){return e.doTouchStart(t,2)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:function(t){return e.onCreateLinkMouseUp(t,void 0)},onTouchEnd:function(t){return e.onCreateLinkTouchEnd(t,void 0)}})),o.a.createElement("div",{style:{overflow:"hidden"}},l.values.dataViewPort.task.showLabel?null!==(t=this.props.item.customLabel)&&void 0!==t?t:this.props.item.name:""),o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:n.width-3,height:n.height},onMouseDown:function(t){return e.doMouseDown(t,3)},onTouchStart:function(t){return e.doTouchStart(t,3)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:function(t){return e.onCreateLinkMouseDown(t,void 0)},onTouchStart:function(t){return e.onCreateLinkTouchStart(t,void 0)}})))}}])&&B(n.prototype,i),a&&B(n,a),e}(),K=n(5),Q=n.n(K);function Z(t){"@babel/helpers - typeof";return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}function it(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?at(t):e}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ut=function(t){function e(t){return nt(this,e),it(this,st(e).call(this,t))}return ct(e,r["Component"]),ot(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"timeLine-main-data-row",style:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(e){et(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},l.values.dataViewPort.rows.style,{top:this.props.top,height:this.props.itemheight})},this.props.children)}}]),e}(),pt=function(t){function e(t){var n;return nt(this,e),et(at(n=it(this,st(e).call(this,t))),"onChildDrag",function(t){n.childDragging=t}),et(at(n),"renderRows",function(){for(var t=[],e=n.props.startRow;e<n.props.endRow+1;e++){var r=n.props.data[e];if(!r)break;var i=P.dateToPixel(r.start,n.props.nowposition,n.props.dayWidth),a=P.dateToPixel(r.end,n.props.nowposition,n.props.dayWidth)-i;t.push(o.a.createElement(ut,{key:e,label:r.name,top:e*n.props.itemheight,left:20,itemheight:n.props.itemheight},o.a.createElement(J,{item:r,label:r.name,nowposition:n.props.nowposition,dayWidth:n.props.dayWidth,color:r.color,left:i,width:a,height:n.props.itemheight,onChildDrag:n.onChildDrag,isSelected:n.props.selectedItem==r,onSelectItem:n.props.onSelectItem,onStartCreateLink:n.props.onStartCreateLink,onFinishCreateLink:n.props.onFinishCreateLink,onTaskChanging:n.props.onTaskChanging,onUpdateTask:n.props.onUpdateTask}," ")))}return t}),et(at(n),"doMouseDown",function(t){0!==t.button||n.childDragging||n.props.onMouseDown(t)}),et(at(n),"doMouseMove",function(t){n.props.onMouseMove(t,n.refs.dataViewPort)}),et(at(n),"doTouchStart",function(t){n.childDragging||n.props.onTouchStart(t)}),et(at(n),"doTouchMove",function(t){n.props.onTouchMove(t,n.refs.dataViewPort)}),n.childDragging=!1,n}return ct(e,r["Component"]),ot(e,[{key:"getContainerHeight",value:function(t){return t>0?t*this.props.itemheight:10}},{key:"componentDidMount",value:function(){this.refs.dataViewPort.scrollLeft=0}},{key:"render",value:function(){this.refs.dataViewPort&&(this.refs.dataViewPort.scrollLeft=this.props.scrollLeft,this.refs.dataViewPort.scrollTop=this.props.scrollTop);var t=this.getContainerHeight(this.props.data.length);return o.a.createElement("div",{ref:"dataViewPort",id:"timeLinedataViewPort",className:"timeLine-main-data-viewPort",onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.props.onMouseUp,onMouseLeave:this.props.onMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},o.a.createElement("div",{className:"timeLine-main-data-container",style:{height:t,width:w,maxWidth:w}},this.renderRows()))}}]),e}(),dt=Q()({monitorWidth:!0,monitorHeight:!0})(pt);function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ht=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.link={}}var e,n,r;return e=t,(n=[{key:"registerData",value:function(t){if(t){this.data={};for(var e=0;e<t.length;e++)this.data[t[e].id]={item:t[e],index:e}}}},{key:"registerLinks",value:function(t){if(t){this.link={};for(var e=0,n=0,r=0;r<t.length;r++){e=t[r].start,n=t[r].end;var o={link:t[r],index:r};this.createAddTo(e,this.link,o,r),this.createAddTo(n,this.link,o,r)}}}},{key:"createAddTo",value:function(t,e,n,r){e[t]||(e[t]=[]),-1==e[t].indexOf(n)&&e[t].push(n)}},{key:"getTask",value:function(t){return this.data[t]}},{key:"getLinks",value:function(t){return this.link[t]}}])&&ft(e.prototype,n),r&&ft(e,r),t}());function yt(t){"@babel/helpers - typeof";return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kt=20,xt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=bt(e).call(this,t),wt(gt(n=!o||"object"!==yt(o)&&"function"!=typeof o?gt(r):o),"calcNormCoordinates",function(){var t;return{cpt1:{x:t=n.props.start.x+(n.props.end.x-n.props.start.x)/2,y:n.props.start.y},cpt2:{x:t,y:n.props.end.y}}}),wt(gt(n),"calcSCoordinates",function(){var t={x:n.props.start.x+kt,y:n.props.start.y},e=(n.props.end.y-n.props.start.y)/2,r={x:t.x,y:t.y+e},o={x:n.props.end.x-kt,y:r.y};return{cpt1:t,cpt2:r,cpt3:o,cpt4:{x:o.x,y:o.y+e}}}),wt(gt(n),"getPath",function(){var t=null;return n.props.start.x>n.props.end.x?(t=n.calcSCoordinates(),"M".concat(n.props.start.x," ").concat(n.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(t.cpt3.x," ").concat(t.cpt3.y," ").concat(t.cpt4.x," ").concat(t.cpt4.y," ").concat(n.props.end.x," ").concat(n.props.end.y)):(t=n.calcNormCoordinates(),"M".concat(n.props.start.x," ").concat(n.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(n.props.end.x," ").concat(n.props.end.y))}),wt(gt(n),"onSelect",function(t){n.props.onSelectItem&&n.props.onSelectItem(n.props.item)}),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,r["Component"]),n=e,(i=[{key:"render",value:function(){var t=this.props.isSelected?l.values.links.selectedColor:l.values.links.color;return o.a.createElement("g",{className:"timeline-link"},o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:t,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"}))}}])&&mt(n.prototype,i),a&&mt(n,a),e}();function Ot(t){"@babel/helpers - typeof";return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Et=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=Tt(e).call(this,t),Lt(jt(n=!o||"object"!==Ot(o)&&"function"!=typeof o?jt(r):o),"doMouseMove",function(t){n.init||(n.lastX=t.clientX,n.lastY=t.clientY,n.init=!0);var e=n.state.x+(t.clientX-n.lastX),r=n.state.y+(t.clientY-n.lastY);n.lastX=t.clientX,n.lastY=t.clientY,n.setState({x:e,y:r})}),Lt(jt(n),"doMouseUp",function(t){n.props.onFinishCreateLink()}),n.state={x:n.props.start.x,y:n.props.start.y},n.init=!1,n.lastX=-1,n.lastY=-1,n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}},{key:"render",value:function(){return o.a.createElement(xt,{key:-1,start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}})}}])&&St(n.prototype,i),a&&St(n,a),e}();function Mt(t){"@babel/helpers - typeof";return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zt=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=_t(e).call(this,t),Ut(Rt(n=!i||"object"!==Mt(i)&&"function"!=typeof i?Rt(r):i),"getItemPosition",function(t,e){return{x:P.dateToPixel(e,0,n.props.dayWidth),y:t*n.props.itemheight+n.props.itemheight/2}}),Ut(Rt(n),"renderCreateLink",function(){if(n.props.interactiveMode){var t=ht.getTask(n.props.taskToCreate.task.id),e=n.getItemPosition(t.index,t.item.end);return o.a.createElement(Et,{start:e,onFinishCreateLink:n.props.onFinishCreateLink})}}),Ut(Rt(n),"renderChangingTaskLinks",function(){if(n.props.changingTask!=n.state.changingTask){n.state.changingTask=n.props.changingTask;var t=ht.getLinks(n.state.changingTask.item.id);if(!t)return;for(var e=null,r=null,i=null,a={},s={},c=0;c<t.length;c++)e=t[c],(r=ht.getTask(e.link.start))&&(i=ht.getTask(e.link.end))&&(a=n.getItemPosition(r.index,r.item.end),n.state.changingTask.item.id==e.link.start&&(a.x=n.state.changingTask.position.end),s=n.getItemPosition(i.index,i.item.start),n.state.changingTask.item.id==e.link.end&&(s.x=n.state.changingTask.position.start),n.cache[e.index]=o.a.createElement(xt,{key:-c-1,item:e,start:{x:a.x,y:a.y},end:{x:s.x,y:s.y},isSelected:n.props.selectedItem==e,onSelectItem:n.props.onSelectItem}),n.cache=Ct(n.cache))}}),n.cache=[],n.state={links:[],data:[],selectedItem:null},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,r["Component"]),n=e,(i=[{key:"renderLink",value:function(t,e,n,r){var i=this.getItemPosition(t.index,t.item.end),a=this.getItemPosition(e.index,e.item.start);return o.a.createElement(xt,{key:r,item:n,start:{x:i.x,y:i.y},end:{x:a.x,y:a.y},isSelected:this.props.selectedItem==n,onSelectItem:this.props.onSelectItem})}},{key:"renderLinks",value:function(){this.cache=[];var t,e={},n={};if(0!=this.state.data.length)for(var r=0;r<this.state.links.length;r++){var o=this.state.links[r];!o&&e[o.id]||((t=ht.getTask(o.start))&&(n=ht.getTask(o.end))?(this.cache.push(this.renderLink(t,n,o,r)),e[o.id]=""):this.cache.push(null))}}},{key:"refreshData",value:function(){this.props.links==this.state.links&&this.props.data==this.state.data&&this.props.dayWidth==this.state.dayWidth&&this.props.selectedItem==this.state.selectedItem||(this.state.selectedItem=this.props.selectedItem,this.state.dayWidth=this.props.dayWidth,this.state.links=this.props.links,this.state.data=this.props.data,this.state.links&&this.state.data&&this.renderLinks())}},{key:"render",value:function(){return this.refreshData(),this.renderChangingTaskLinks(),o.a.createElement("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:60,userSelect:"none",height:"100%"}},o.a.createElement("defs",null,o.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse"},o.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),o.a.createElement("g",{transform:"matrix(1,0,0,1,".concat(-(this.props.scrollLeft-this.props.nowposition),",").concat(-this.props.scrollTop,")")},this.cache,this.renderCreateLink()))}}])&&Dt(n.prototype,i),a&&Dt(n,a),e}();function Nt(t){"@babel/helpers - typeof";return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=Vt(e).call(this,t),Ht(Ft(n=!i||"object"!==Nt(i)&&"function"!=typeof i?Ft(r):i),"onFocus",function(){n.setState({editing:!0})}),Ht(Ft(n),"onBlur",function(){n.finishEditing()}),Ht(Ft(n),"handleKey",function(t){13===(t.keyCode||t.which)&&n.finishEditing()}),Ht(Ft(n),"finishEditing",function(){n.isFocus=!1,n.setState({editing:!1}),n.props.onChange&&n.props.onChange(n.state.value)}),Ht(Ft(n),"handleChange",function(t){n.setState({value:t.target.value})}),Ht(Ft(n),"renderDiv",function(){return o.a.createElement("div",{tabIndex:n.props.index,onClick:n.onFocus,onFocus:n.onFocus,style:{width:"100%"}}," ",n.state.value)}),Ht(Ft(n),"renderEditor",function(){return o.a.createElement("input",{ref:"textInput",onBlur:n.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:n.state.value,onKeyUp:n.handleKey,onChange:n.handleChange})}),n.isFocus=!1,n.state={editing:!1,value:n.props.value},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidUpdate",value:function(t,e){this.refs.textInput&&!this.isFocus&&(this.refs.textInput.focus(),this.isFocus=!0)}},{key:"shouldComponentUpdate",value:function(t,e){return t.value!=this.props.value&&(this.state.value=t.value),!0}},{key:"render",value:function(){return this.state.editing?this.renderEditor():this.renderDiv()}}])&&Wt(n.prototype,i),a&&Wt(n,a),e}();function Bt(t){"@babel/helpers - typeof";return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e,n){return e&&$t(t.prototype,e),n&&$t(t,n),t}function Kt(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?Qt(t):e}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zt(t){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ne=function(t){function e(t){var n;return Gt(this,e),qt(Qt(n=Kt(this,Zt(e).call(this,t))),"onChange",function(t){n.props.onUpdateTask&&n.props.onUpdateTask(n.props.item,{name:t})}),n}return te(e,r["Component"]),Jt(e,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"timeLine-side-task-row",style:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach(function(e){qt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},l.values.taskList.task.style,{top:this.props.top,height:this.props.itemheight}),onClick:function(e){return t.props.onSelectItem(t.props.item)}},this.props.nonEditable?o.a.createElement("div",{tabIndex:this.props.index,style:{width:"100%"}},this.props.label):o.a.createElement(Yt,{value:this.props.label,index:this.props.index,onChange:this.onChange}))}}]),e}(),re=function(t){function e(t){var n;return Gt(this,e),qt(Qt(n=Kt(this,Zt(e).call(this,t))),"doScroll",function(){n.props.onScroll(n.refs.taskViewPort.scrollTop)}),n}return te(e,r["Component"]),Jt(e,[{key:"getContainerStyle",value:function(t){return{height:t>0?t*this.props.itemheight:10}}},{key:"renderTaskRow",value:function(t){for(var e=[],n=this.props.startRow;n<this.props.endRow+1;n++){var r=t[n];if(!r)break;e.push(o.a.createElement(ne,{key:n,index:n,item:r,label:r.name,top:n*this.props.itemheight,itemheight:this.props.itemheight,isSelected:this.props.selectedItem==r,onUpdateTask:this.props.onUpdateTask,onSelectItem:this.props.onSelectItem,nonEditable:this.props.nonEditable}))}return e}},{key:"render",value:function(){var t=this.props.data?this.props.data:[];return this.containerStyle=this.getContainerStyle(t.length),o.a.createElement("div",{className:"timeLine-side"},o.a.createElement("div",{className:"timeLine-side-title",style:l.values.taskList.title.style},o.a.createElement("div",null,l.values.taskList.title.label)),o.a.createElement("div",{ref:"taskViewPort",className:"timeLine-side-task-viewPort",onScroll:this.doScroll},o.a.createElement("div",{className:"timeLine-side-task-container",style:this.containerStyle},this.renderTaskRow(t))))}}]),e}();function oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ie=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,"initialise",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.setLimits(t,n,r,o),e.loadDataHorizon()}),oe(this,"setStartEnd",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.needData(t,n)&&(e.setLimits(t,n),e.loadDataHorizon())}),oe(this,"needData",function(t,n){return t<e.lower_data_limit||n>e.upper_data_limit}),oe(this,"setLimits",function(t,n){e.lower_limit=t-1e3,e.lower_data_limit=t-750,e.upper_limit=n+1e3,e.upper_data_limit=n+750}),oe(this,"loadDataHorizon",function(){var t=P.pixelToDate(e.lower_limit,e.nowposition,e.daywidth),n=P.pixelToDate(e.upper_limit,e.nowposition,e.daywidth);e.onHorizonChange(t,n)}),this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]};n(11);function ae(t){"@babel/helpers - typeof";return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fe=function(t){function e(t){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=le(e).call(this,t),de(ue(n=!o||"object"!==ae(o)&&"function"!=typeof o?ue(r):o),"onSize",function(t){n.calculateVerticalScrollVariables(t),n.initialise||(n.dc.initialise(n.state.scrollLeft+n.state.nowposition,n.state.scrollLeft+n.state.nowposition+t.width,n.state.nowposition,n.state.dayWidth),n.initialise=!0),n.setStartEnd();var e=Math.ceil(t.height/n.props.itemheight),r=n.calcNumVisibleDays(t),o=n.calculateStartEndRows(e,n.props.data,n.state.scrollTop);n.setState({numVisibleRows:e,numVisibleDays:r,startRow:o.start,endRow:o.end,size:t})}),de(ue(n),"verticalChange",function(t){if(t!=n.state.scrollTop){var e=n.calculateStartEndRows(n.state.numVisibleRows,n.props.data,t);e.start!==n.state.start&&n.setState({scrollTop:t,startRow:e.start,endRow:e.end})}}),de(ue(n),"calculateStartEndRows",function(t,e,r){var o=Math.trunc(r/n.props.itemheight);return{start:o,end:o+t>=e.length?e.length:o+t}}),de(ue(n),"setStartEnd",function(){n.dc.setStartEnd(n.state.scrollLeft,n.state.scrollLeft+n.state.size.width,n.state.nowposition,n.state.dayWidth)}),de(ue(n),"horizontalChange",function(t){var e=n.state.nowposition,r=-1,o=n.state.headerData,i=n.state.startRow,a=n.state.endRow;t>n.pxToScroll?(e=n.state.nowposition-n.pxToScroll,r=0):t<=0?(e=n.state.nowposition+n.pxToScroll,r=n.pxToScroll):r=t;var s=Math.trunc((t-n.state.nowposition)/n.state.dayWidth);a=(i=Math.trunc(n.state.scrollTop/n.props.itemheight))+n.state.numVisibleRows>=n.props.data.length?n.props.data.length-1:i+n.state.numVisibleRows,n.setStartEnd(),n.setState({currentday:s,nowposition:e,headerData:o,scrollLeft:r,startRow:i,endRow:a})}),de(ue(n),"calculateVerticalScrollVariables",function(t){n.pxToScroll=(1-t.width/w)*w-1}),de(ue(n),"onHorizonChange",function(t,e){n.props.onHorizonChange&&n.props.onHorizonChange(t,e)}),de(ue(n),"doMouseDown",function(t){n.dragging=!0,n.draggingPosition=t.clientX}),de(ue(n),"doMouseMove",function(t){if(n.dragging){var e=n.draggingPosition-t.clientX;0!==e&&(n.draggingPosition=t.clientX,n.horizontalChange(n.state.scrollLeft+e))}}),de(ue(n),"doMouseUp",function(t){n.dragging=!1}),de(ue(n),"doMouseLeave",function(t){n.dragging=!1}),de(ue(n),"doTouchStart",function(t){n.dragging=!0,n.draggingPosition=t.touches[0].clientX}),de(ue(n),"doTouchEnd",function(t){n.dragging=!1}),de(ue(n),"doTouchMove",function(t){if(n.dragging){var e=n.draggingPosition-t.touches[0].clientX;0!==e&&(n.draggingPosition=t.touches[0].clientX,n.horizontalChange(n.state.scrollLeft+e))}}),de(ue(n),"doTouchCancel",function(t){n.dragging=!1}),de(ue(n),"doMouseLeave",function(t){n.dragging=!1}),de(ue(n),"onTaskListSizing",function(t){n.setState(function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach(function(e){de(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e);return n.sideStyle={width:n.sideStyle.width-t},n})}),de(ue(n),"onSelectItem",function(t){n.props.onSelectItem&&t!=n.props.selectedItem&&n.props.onSelectItem(t)}),de(ue(n),"onStartCreateLink",function(t,e){n.setState({interactiveMode:!0,taskToCreate:{task:t,position:e}})}),de(ue(n),"onFinishCreateLink",function(t,e){n.props.onCreateLink&&t&&n.state.taskToCreate&&n.state.taskToCreate.task.id!=t.id&&n.props.onCreateLink({start:n.state.taskToCreate,end:{task:t,position:e}}),n.setState({interactiveMode:!1,taskToCreate:null})}),de(ue(n),"onTaskChanging",function(t){n.setState({changingTask:t})}),de(ue(n),"calcNumVisibleDays",function(t){return Math.ceil(t.width/n.state.dayWidth)+v}),de(ue(n),"checkNeeeData",function(){if(n.props.data!=n.state.data){n.state.data=n.props.data;var t=n.calculateStartEndRows(n.state.numVisibleRows,n.props.data,n.state.scrollTop);n.state.startRow=t.start,n.state.endRow=t.end,ht.registerData(n.state.data)}n.props.links!=n.state.links&&(n.state.links=n.props.links,ht.registerLinks(n.props.links))}),n.dragging=!1,n.draggingPosition=0,n.dc=new ie,n.dc.onHorizonChange=n.onHorizonChange,n.initialise=!1,n.pxToScroll=1900;var i=n.getDayWidth(n.props.mode);return l.load(n.props.config),n.state={currentday:0,nowposition:0,startRow:0,endRow:10,sideStyle:{width:200},scrollLeft:0,scrollTop:0,numVisibleRows:40,numVisibleDays:60,dayWidth:i,interactiveMode:!1,taskToCreate:null,links:[],mode:n.props.mode?n.props.mode:O,size:{width:1,height:1},changingTask:null},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,r["Component"]),n=e,(i=[{key:"getDayWidth",value:function(t){switch(t){case k:return 1440;case x:return 480;case O:return 24;case S:return 4;default:return 24}}},{key:"checkMode",value:function(){if(this.props.mode!=this.state.mode&&this.props.mode){this.state.mode=this.props.mode;var t=this.getDayWidth(this.state.mode);this.state.dayWidth=t,this.state.numVisibleDays=this.calcNumVisibleDays(this.state.size);var e=Math.ceil(-this.state.currentday*this.state.dayWidth/this.pxToScroll);this.state.nowposition=e*this.pxToScroll;var n=(this.state.currentday*this.state.dayWidth+this.state.nowposition)%this.pxToScroll;this.state.scrollLeft=n}}},{key:"render",value:function(){var t;return this.checkMode(),this.checkNeeeData(),this.state.size,o.a.createElement("div",{className:"timeLine"},o.a.createElement("div",{className:"timeLine-side-main",style:this.state.sideStyle},o.a.createElement(re,{ref:"taskViewPort",itemheight:this.props.itemheight,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onScroll:this.verticalChange,nonEditable:this.props.nonEditableName}),o.a.createElement(y,{onTaskListSizing:this.onTaskListSizing})),o.a.createElement("div",{className:"timeLine-main"},o.a.createElement(F,{headerData:this.state.headerData,numVisibleDays:this.state.numVisibleDays,currentday:this.state.currentday,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,mode:this.state.mode,scrollLeft:this.state.scrollLeft}),o.a.createElement(dt,{ref:"dataViewPort",scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,itemheight:this.props.itemheight,nowposition:this.state.nowposition,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,dayWidth:this.state.dayWidth,onScroll:this.scrollData,onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.doMouseUp,onMouseLeave:this.doMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.doTouchEnd,onTouchCancel:this.doTouchCancel,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onTaskChanging:this.onTaskChanging,onStartCreateLink:this.onStartCreateLink,onFinishCreateLink:this.onFinishCreateLink,boundaries:{lower:this.state.scrollLeft,upper:this.state.scrollLeft+this.state.size.width},onSize:this.onSize}),o.a.createElement(zt,(de(t={scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,interactiveMode:this.state.interactiveMode,taskToCreate:this.state.taskToCreate,onFinishCreateLink:this.onFinishCreateLink,changingTask:this.state.changingTask,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,itemheight:this.props.itemheight},"onSelectItem",this.onSelectItem),de(t,"links",this.props.links),t))))}}])&&ce(n.prototype,i),a&&ce(n,a),e}();fe.propTypes={itemheight:a.a.number.isRequired,dayWidth:a.a.number.isRequired,nonEditableName:a.a.bool},fe.defaultProps={itemheight:20,dayWidth:24,nonEditableName:!1};e.default=fe}])});